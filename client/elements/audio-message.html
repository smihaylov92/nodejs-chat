<link rel="import" href="../../bower_components/polymer/polymer.html">

<dom-module id="audio-message">
	<template>
		<style>
			:host {
				display: block;
				width: calc(50% - 32px);
				margin: 20px;
				float: left;
				padding: 5px;
				border-radius: 10px;
				background-color: #c1d9ff;
			}

			:host .message-wrapper {
				float: left;
			}

			:host([own-message]) {
				float: right;
				background-color: #2f9cef;
				color: #ffffff;
			}

			:host .date-wrapper {
				font-size: 12px;
				float: right;
			}
		</style>

		<!-- <div class="message-wrapper">  -->
			<div class="user-wrapper">
				<span>[[user]]</span>
			</div>
			<div class="audio-wrapper">
				<audio id="audioPlayer" controls src="[[audioURL]]"></audio>
			</div>
			<div class="date-wrapper">
				<span>[[date]]</span>
			</div>
		<!-- </div> -->
	</template>

	<script>
		(function(){
			'use strict';
			Polymer({
			  	is: 'audio-message',
			  	properties: {
			  		audio: {
			  			type: Object,
			  			observer: '_createAudioURL'
			  		},
			  		audioURL: String,
			  		date: String,
			  		user: String,
			  		ownMessage: {
			  			type: Boolean,
			  			reflectToAttribute: true
			  		}
			  	},

			  	_createAudioURL: function(){
		        	var blob = new Blob(this.audio, {type:'audio/x-mpeg-3'});
			  		this.audioURL = URL.createObjectURL(blob);
			  	}
			});
		})();
	</script>

</dom-module>